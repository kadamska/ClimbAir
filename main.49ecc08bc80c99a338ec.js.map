{"version":3,"file":"main.49ecc08bc80c99a338ec.js","mappings":"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","sources":["webpack://@softrockspl/climbair/./src/app/store.ts","webpack://@softrockspl/climbair/./src/services/api.ts","webpack://@softrockspl/climbair/./src/components/WeatherMarker.tsx","webpack://@softrockspl/climbair/./src/App.tsx","webpack://@softrockspl/climbair/./src/i18n/i18n.ts","webpack://@softrockspl/climbair/./src/index.tsx"],"sourcesContent":["var _a;\nimport { configureStore } from '@reduxjs/toolkit';\nimport { api } from '../services/api';\nvar store = configureStore({\n    reducer: (_a = {},\n        _a[api.reducerPath] = api.reducer,\n        _a),\n    middleware: function (getDefaultMiddleware) {\n        return getDefaultMiddleware().concat(api.middleware);\n    },\n});\nexport default store;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\n// Define the API service\nvar weatherAPIKey = 'f1f10124d8835f9f53a99e0425ea5f60'; // config\nexport var api = createApi({\n    reducerPath: 'api',\n    baseQuery: fetchBaseQuery({}),\n    tagTypes: ['Spots', 'Weather', 'Forecast'],\n    endpoints: function (builder) { return ({\n        getClimbingSpots: builder.query({\n            query: function (_a) {\n                var radius = _a.radius, lat = _a.lat, lon = _a.lon;\n                return ({\n                    url: 'https://overpass-api.de/api/interpreter',\n                    method: 'POST',\n                    body: \"\\n          [out:json];\\n          nw(around:\".concat(radius, \",\").concat(lat, \",\").concat(lon, \")[\\\"sport\\\"=\\\"climbing\\\"];\\n          (._;>;);\\n          out body;\\n        \"),\n                });\n            },\n            providesTags: function (result, error, arg) { return [{ type: 'Spots', id: \"\".concat(arg.radius, \"-\").concat(arg.lat, \"-\").concat(arg.lon) }]; },\n            keepUnusedDataFor: 3600 * 24, // Cache duration set to 24 hours\n            transformResponse: function (response) {\n                var nodes = response.elements.filter(function (e) { return e.type === \"node\"; });\n                var unnamedNodes = nodes.filter(function (e) { var _a; return !((_a = e.tags) === null || _a === void 0 ? void 0 : _a.name); });\n                var namedNodes = nodes.filter(function (e) { var _a; return !!((_a = e.tags) === null || _a === void 0 ? void 0 : _a.name); });\n                var firstNode;\n                var wayNodes = response.elements\n                    .filter(function (e) { return e.type === \"way\"; })\n                    .map(function (e) {\n                    firstNode = unnamedNodes.find(function (n) { return n.id == e.nodes[0]; });\n                    return __assign(__assign({}, e), { tags: __assign(__assign({}, e.tags), { name: e.tags.name || \"unnamed\" }), lat: firstNode.lat, lon: firstNode.lon });\n                });\n                var result = namedNodes.concat(wayNodes);\n                return result;\n            }\n        }),\n        getCurrentWeather: builder.query({\n            query: function (_a) {\n                var lat = _a.lat, lon = _a.lon;\n                return (\"https://api.openweathermap.org/data/2.5/weather?lat=\".concat(lat, \"&lon=\").concat(lon, \"&units=metric&appid=\").concat(weatherAPIKey));\n            },\n            providesTags: function (result, error, arg) { return [{ type: 'Weather', id: \"\".concat(arg.lat, \"-\").concat(arg.lon) }]; },\n            keepUnusedDataFor: 3600, // Cache duration set to 1 hour\n        }),\n        getForecast: builder.query({\n            query: function (_a) {\n                var lat = _a.lat, lon = _a.lon;\n                return ({\n                    url: \"https://api.openweathermap.org/data/2.5/forecast?lat=\".concat(lat, \"&lon=\").concat(lon, \"&units=metric&appid=\").concat(weatherAPIKey),\n                    method: 'GET',\n                });\n            },\n            providesTags: function (result, error, arg) { return [{ type: 'Forecast', id: \"\".concat(arg.lat, \"-\").concat(arg.lon) }]; },\n            keepUnusedDataFor: 3600 * 6, // Cache duration set to 6 hours\n        }),\n    }); },\n});\nexport var useGetClimbingSpotsQuery = api.useGetClimbingSpotsQuery, useGetCurrentWeatherQuery = api.useGetCurrentWeatherQuery, useGetForecastQuery = api.useGetForecastQuery;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Marker } from 'react-leaflet';\nimport L from 'leaflet';\nimport { useGetCurrentWeatherQuery } from '../services/api';\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport iconRetinaUrl from 'leaflet/dist/images/marker-icon-2x.png';\nvar DefaultIcon = L.icon({\n    iconUrl: icon,\n    shadowUrl: iconShadow,\n    iconRetinaUrl: iconRetinaUrl,\n    iconSize: [25, 41], // Adjust as needed\n    iconAnchor: [13, 0]\n});\nvar WeatherMarker = function (_a) {\n    var cluster = _a.cluster;\n    var centralPoint = cluster.centralPoint;\n    // fetch weather data for the central point\n    var data = useGetCurrentWeatherQuery({\n        lat: centralPoint.lat,\n        lon: centralPoint.lon,\n    }).data;\n    if (!data || !data.weather || !data.main)\n        return null;\n    var iconUrl = data.weather[0].icon\n        ? \"http://openweathermap.org/img/wn/\".concat(data.weather[0].icon, \".png\")\n        : null;\n    var temperature = \"\".concat(Math.round(data.main.temp), \"\\u00B0C\");\n    var iconHtml = \"\\n    <div style=\\\"display: flex; align-items: center;\\\">\\n      <img src=\\\"\".concat(iconUrl, \"\\\" alt=\\\"weather icon\\\" style=\\\"width: 50px; height: 50px;\\\" />\\n      <span style=\\\"text-shadow: 1px 1px 1px #fff, -1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff\\\">\").concat(temperature, \"</span>\\n    </div>\\n  \");\n    var weatherIcon = iconUrl ? new L.DivIcon({\n        html: iconHtml,\n        className: '',\n        iconSize: [60, 60], // Adjust as needed\n        iconAnchor: [30, 30]\n    }) : DefaultIcon;\n    return (_jsx(Marker, { position: [centralPoint.lat, centralPoint.lon], icon: weatherIcon }));\n};\nexport default WeatherMarker;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport { useGetClimbingSpotsQuery, useGetCurrentWeatherQuery,\n// useGetForecastQuery,\n } from './services/api';\nimport { useTranslation } from 'react-i18next';\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport iconRetinaUrl from 'leaflet/dist/images/marker-icon-2x.png';\nimport WeatherMarker from './components/WeatherMarker';\nvar weatherAPIKey = 'f1f10124d8835f9f53a99e0425ea5f60'; // config\nvar DefaultIcon = L.icon({\n    iconUrl: icon,\n    shadowUrl: iconShadow,\n    iconRetinaUrl: iconRetinaUrl,\n    iconSize: [25, 41], // Adjust as needed\n    iconAnchor: [13, 0]\n});\n// Calculate distance between two points\nvar calculateDistance = function (point1, point2) {\n    var R = 6371; // Earth radius in km\n    var dLat = (point2.lat - point1.lat) * Math.PI / 180;\n    var dLon = (point2.lon - point1.lon) * Math.PI / 180;\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.cos(point1.lat * Math.PI / 180) * Math.cos(point2.lat * Math.PI / 180) *\n            Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n};\n// Group spots into clusters\nvar groupSpotsIntoClusters = function (spots, distanceThreshold) {\n    var clusters = [];\n    spots.forEach(function (spot) {\n        var addedToCluster = false;\n        for (var _i = 0, clusters_1 = clusters; _i < clusters_1.length; _i++) {\n            var cluster = clusters_1[_i];\n            var centralPoint = cluster.centralPoint, members = cluster.members;\n            var distance = calculateDistance(centralPoint, spot);\n            if (distance <= distanceThreshold) {\n                members.push(spot);\n                cluster.centralPoint = {\n                    lat: (centralPoint.lat * members.length + spot.lat) / (members.length + 1),\n                    lon: (centralPoint.lon * members.length + spot.lon) / (members.length + 1),\n                };\n                addedToCluster = true;\n                break;\n            }\n        }\n        if (!addedToCluster) {\n            clusters.push({\n                centralPoint: { lat: spot.lat, lon: spot.lon },\n                members: [spot],\n            });\n        }\n    });\n    return clusters;\n};\nvar isIndoor = function (spot) {\n    return spot.tags.indoor === 'yes'\n        || spot.tags.building === 'yes'\n        || spot.tags.leisure === 'sports_centre';\n};\nvar IndoorDetails = function (_a) {\n    var spot = _a.spot;\n    return (_jsxs(_Fragment, { children: [_jsx(\"h2\", { children: spot.tags.name }), _jsx(\"div\", { children: \"\\u015Acianka wspinaczkowa\" }), spot.tags.description && _jsx(\"div\", { children: spot.tags.description }), spot.tags[\"addr:street\"] && _jsxs(\"div\", { children: [spot.tags[\"addr:street\"], \" \", spot.tags[\"addr:housenumber\"]] }), spot.tags[\"addr:city\"] && _jsxs(\"div\", { children: [spot.tags[\"addr:postcode\"], \" \", spot.tags[\"addr:city\"]] }), spot.tags[\"opening_hours\"] && _jsxs(\"div\", { children: [\"Czynne: \", spot.tags[\"opening_hours\"]] }), spot.tags[\"phone\"] && _jsxs(\"div\", { children: [\"Telefon: \", spot.tags[\"phone\"]] }), spot.tags[\"website\"] && _jsxs(\"div\", { children: [\"WWW: \", spot.tags[\"website\"]] }), spot.tags[\"facebook\"] && _jsxs(\"div\", { children: [\"FB: \", spot.tags[\"facebook\"]] }), spot.tags[\"height\"] && _jsxs(\"div\", { children: [\"Wysoko\\u015B\\u0107: \", spot.tags[\"height\"], \"m\"] })] }));\n};\nvar OutdoorDetails = function (_a) {\n    var spot = _a.spot;\n    console.log(\"SPOT\", spot);\n    return (_jsxs(_Fragment, { children: [_jsx(\"h2\", { children: spot.tags.name }), spot.tags.description && _jsx(\"div\", { children: spot.tags.description }), spot.tags.climbing && _jsxs(\"div\", { children: [\"Typ wspinania: \", spot.tags.climbing] }), spot.tags[\"climbing:boulder\"] === \"yes\" && _jsx(\"div\", { children: \"Bouldery\" }), spot.tags[\"climbing:bolted\"] === \"yes\" && _jsx(\"div\", { children: \"Drogi ubezpieczone\" }), spot.tags[\"climbing:mixed\"] === \"yes\" && _jsx(\"div\", { children: \"Drogi mieszane\" }), spot.tags[\"climbing:sport\"] === \"yes\" && _jsx(\"div\", { children: \"Drogi sportowe\" }), spot.tags[\"climbing:trad\"] === \"yes\" && _jsx(\"div\", { children: \"Drogi tradowe (klasyczne)\" }), spot.tags[\"climbing:rock\"] && _jsxs(\"div\", { children: [\"Ska\\u0142a: \", spot.tags[\"climbing:rock\"]] }), spot.tags[\"climbing:grade:french:min\"] && _jsxs(\"div\", { children: [\"Min. trudno\\u015B\\u0107: \", spot.tags[\"climbing:grade:french:min\"]] }), spot.tags[\"climbing:grade:french:max\"] && _jsxs(\"div\", { children: [\"Max. trudno\\u015B\\u0107: \", spot.tags[\"climbing:grade:french:max\"]] }), spot.tags[\"rock\"] && _jsxs(\"div\", { children: [\"Ska\\u0142a: \", spot.tags[\"rock\"]] }), spot.tags[\"height\"] && _jsxs(\"div\", { children: [\"Wysoko\\u015B\\u0107: \", spot.tags[\"height\"], \"m\"] }), spot.tags[\"climbing:routes\"] && _jsxs(\"div\", { children: [\"Liczba dr\\u00F3g: \", spot.tags[\"climbing:routes\"]] }), spot.tags[\"url\"] && _jsxs(\"div\", { children: [\"URL: \", spot.tags[\"url\"]] })] }));\n};\nvar SpotDetailsPanel = function (_a) {\n    var spot = _a.spot, onClose = _a.onClose;\n    return (_jsxs(\"div\", { style: { padding: '10px', width: '300px', borderLeft: '1px solid grey', position: 'relative' }, children: [_jsx(\"button\", { onClick: onClose, style: {\n                    position: 'absolute',\n                    top: '10px',\n                    right: '10px',\n                    background: 'transparent',\n                    border: 'none',\n                    fontSize: '18px',\n                    cursor: 'pointer',\n                }, children: \"\\u00D7\" }), isIndoor(spot) ? _jsx(IndoorDetails, { spot: spot }) : _jsx(OutdoorDetails, { spot: spot })] }));\n};\nfunction App() {\n    var _a = useState(false), isForecast = _a[0], setIsForecast = _a[1];\n    var _b = useState([51.1093, 17.0386]), userLocation = _b[0], setUserLocation = _b[1]; // Wroclaw\n    var _c = useState(100), radius = _c[0], setRadius = _c[1]; // default radius in km - 100 km\n    var _d = useState(null), selectedSpot = _d[0], setSelectedSpot = _d[1];\n    var t = useTranslation().t;\n    useEffect(function () {\n        // get user location\n        navigator.geolocation.getCurrentPosition(function (position) {\n            var _a = position.coords, latitude = _a.latitude, longitude = _a.longitude;\n            setUserLocation([latitude, longitude]);\n        }, function (error) {\n            console.error('Error getting user location:', error);\n        });\n    }, []);\n    var _e = useGetClimbingSpotsQuery({\n        radius: radius * 1000,\n        lat: userLocation[0],\n        lon: userLocation[1],\n    }).data, climbingSpots = _e === void 0 ? [] : _e;\n    // group climbing spots into clusters based on distance\n    var distanceThreshold = 10; // in kilometers\n    var clusters = groupSpotsIntoClusters(climbingSpots, distanceThreshold);\n    var weatherData = useGetCurrentWeatherQuery(climbingSpots.length ? { lat: climbingSpots[0].lat, lon: climbingSpots[0].lon } : { lat: 0, lon: 0 }, { skip: climbingSpots.length === 0 }).data;\n    // const { data: forecastData } = useGetForecastQuery(\n    //   climbingSpots.length ? { lat: climbingSpots[0].lat, lon: climbingSpots[0].lon } : { lat: 0, lon: 0},\n    //   { skip: climbingSpots.length === 0 }\n    // );\n    return (_jsxs(\"div\", { className: \"App\", style: { display: 'flex' }, children: [_jsxs(\"div\", { style: { flex: '1' }, children: [_jsx(\"h1\", { children: t(\"climbing_map\") }), _jsxs(\"div\", { children: [_jsxs(\"label\", { children: [t(\"radius\"), \" (\", t(\"kilometers\"), \"):\", _jsx(\"input\", { type: \"number\", value: radius, onChange: function (e) { return setRadius(Number(e.target.value)); }, style: { marginLeft: '10px', marginRight: '10px' } })] }), _jsx(\"button\", { onClick: function () { return setIsForecast(false); }, children: t(\"current_weather\") }), _jsx(\"button\", { onClick: function () { return setIsForecast(true); }, children: t(\"forecast\") })] }), _jsxs(MapContainer, { center: userLocation, zoom: 10, style: { height: '600px', width: '100%' }, children: [_jsx(TileLayer, { url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", attribution: '\\u00A9 <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors' }), _jsx(TileLayer, { url: \"https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=\".concat(weatherAPIKey) }), climbingSpots.map(function (spot, idx) {\n                                return (_jsx(Marker, { position: [spot.lat, spot.lon], icon: DefaultIcon, eventHandlers: {\n                                        click: function () {\n                                            setSelectedSpot(spot);\n                                        },\n                                    }, zIndexOffset: 1000, children: _jsxs(Popup, { children: [_jsxs(\"b\", { children: [spot.tags.name, \" \", (spot.tags.indoor === \"yes\" || spot.tags.building === \"yes\" || spot.tags.leisure === \"sports_centre\") && _jsx(\"span\", { children: \"(\\u015Bcianka)\" })] }), _jsx(\"br\", {})] }) }, idx));\n                            }), clusters.map(function (cluster, idx) { return (_jsx(WeatherMarker, { cluster: cluster }, idx)); })] })] }), selectedSpot && _jsx(SpotDetailsPanel, { spot: selectedSpot, onClose: function () { return setSelectedSpot(null); } })] }));\n}\nexport default App;\n","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport detector from \"i18next-browser-languagedetector\";\nimport translationEN from \"./locales/en.json\";\nimport translationPL from \"./locales/pl.json\";\nvar resources = {\n    en: {\n        translation: translationEN,\n    },\n    pl: {\n        translation: translationPL,\n    },\n};\ni18n\n    .use(detector)\n    .use(initReactI18next) // passes i18n down to react-i18next\n    .init({\n    resources: resources,\n    fallbackLng: \"pl\",\n    interpolation: {\n        escapeValue: false // react already safes from xss\n    }\n});\nexport default i18n;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Provider } from 'react-redux';\nimport store from './app/store';\nimport { createRoot } from 'react-dom/client';\nimport App from \"./App\";\nimport './i18n/i18n';\nimport \"./styles.css\";\nvar container = document.getElementById('root');\nvar root = createRoot(container);\nroot.render(_jsx(Provider, { store: store, children: _jsx(App, {}) }));\n"],"names":["_a","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","weatherAPIKey","api","reducerPath","baseQuery","tagTypes","endpoints","builder","getClimbingSpots","query","radius","lat","lon","url","method","body","concat","providesTags","result","error","arg","type","id","keepUnusedDataFor","transformResponse","response","firstNode","nodes","elements","filter","e","unnamedNodes","tags","name","namedNodes","wayNodes","map","find","getCurrentWeather","getForecast","useGetClimbingSpotsQuery","useGetCurrentWeatherQuery","useGetForecastQuery","reducer","middleware","getDefaultMiddleware","DefaultIcon","iconUrl","shadowUrl","iconRetinaUrl","iconSize","iconAnchor","centralPoint","cluster","data","weather","main","icon","temperature","Math","round","temp","iconHtml","weatherIcon","html","className","Marker","position","isIndoor","spot","indoor","building","leisure","IndoorDetails","children","description","OutdoorDetails","console","log","climbing","SpotDetailsPanel","onClose","style","padding","width","borderLeft","onClick","top","right","background","border","fontSize","cursor","resources","en","translation","pl","use","init","fallbackLng","interpolation","escapeValue","container","document","getElementById","render","store","useState","setIsForecast","_b","userLocation","setUserLocation","_c","setRadius","_d","selectedSpot","setSelectedSpot","useEffect","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","_e","climbingSpots","clusters","spots","forEach","point1","point2","dLat","dLon","a","addedToCluster","_i","clusters_1","members","PI","sin","cos","atan2","sqrt","push","groupSpotsIntoClusters","skip","display","flex","value","onChange","Number","target","marginLeft","marginRight","MapContainer","center","zoom","height","TileLayer","attribution","idx","eventHandlers","click","zIndexOffset","Popup"],"sourceRoot":""}